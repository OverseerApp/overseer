<div class="col-12">
  <app-card-section
    icon="bi-unlock-fill"
    [heading]="'preauthenticationSettings' | i18next"
  >
    <div class="card-header bg-transparent border-bottom-0 pb-0">
      <div class="d-flex align-items-center mt-3 p-3 bg-secondary bg-opacity-10 border border-secondary rounded-3">
        <i class="bi bi-info-circle me-2 text-info"></i>
        <p class="small text-muted mb-0">
          @if (user()?.accessLevel === 'Readonly') {
            {{ 'preauthenticationDescriptionReadonly' | i18next }}
          } @else {
            {{ 'preauthenticationDescriptionUser' | i18next }}
          }
          {{ 'preauthenticationLinkExpires' | i18next }}
        </p>
      </div>
    </div>
    <div class="card-body">
      <div class="input-group">
        <input
          #generatedUrlInput
          type="text"
          class="form-control border-secondary"
          [placeholder]="'preauthenticationTitle' | i18next"
          readonly
          [value]="generatedUrl()"
        />
        @if (!generatedUrl()) {
          <button
            type="button"
            class="btn btn-outline-secondary"
            (click)="generatePreAuthentication()"
            [title]="'generate' | i18next"
          >
            <i class="bi bi-arrow-repeat"></i>
          </button>
        }
        @if (generatedUrl()) {
          <button
            type="button"
            class="btn btn-outline-secondary"
            (click)="copyToClipboard(generatedUrlInput)"
            [title]="'copy' | i18next"
          >
            <i class="bi bi-clipboard"></i>
          </button>
        }
      </div>
    </div>
  </app-card-section>
</div>
