@if (form) {
  <form [formGroup]="form">
    <div class="container-fluid p-0">
      <app-card-section
        icon="bi-sliders2-vertical"
        [heading]="'generalConfiguration' | i18next"
        class="mb-4"
      >
        <div class="card-body">
          <div class="row g-4">
            <div class="col-md-6">
              <label class="form-label small fw-bold">{{ 'themes.scheme' | i18next }}</label>
              <select
                #schemeSelect
                id="scheme"
                class="form-select border-secondary"
                [value]="themeService.scheme()"
                (change)="handleSchemeChange(schemeSelect.value)"
              >
                <option value="auto">{{ 'themes.auto' | i18next }}</option>
                <option value="light">{{ 'themes.light' | i18next }}</option>
                <option value="dark">{{ 'themes.dark' | i18next }}</option>
              </select>
            </div>
            <div class="col-md-6">
              <label class="form-label small fw-bold">{{ 'pollInterval' | i18next }}</label>
              <select
                class="form-select border-secondary"
                formControlName="interval"
              >
                @for (option of intervals; track $index) {
                  <option [ngValue]="option.value">{{ option.value / 1000 }} {{ option.translationKey | i18next }}</option>
                }
              </select>
            </div>

            <div class="col-12">
              <div class="d-flex flex-column gap-3 mt-2">
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    role="switch"
                    id="hideDisabledMachines"
                    formControlName="hideDisabledMachines"
                  />
                  <label
                    class="form-check-label fw-bold"
                    for="hideDisabledMachines"
                    >{{ 'hideDisabledMachines' | i18next }}</label
                  >
                </div>
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    role="switch"
                    id="hideIdleMachines"
                    formControlName="hideIdleMachines"
                  />
                  <label
                    class="form-check-label fw-bold"
                    for="hideIdleMachines"
                    >{{ 'hideIdleMachines' | i18next }}</label
                  >
                </div>
                <div class="form-check form-switch">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    role="switch"
                    id="sortByTimeRemaining"
                    formControlName="sortByTimeRemaining"
                  />
                  <label
                    class="form-check-label fw-bold"
                    for="sortByTimeRemaining"
                    >{{ 'sortByTimeRemaining' | i18next }}</label
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </app-card-section>
      @if (supportsAiMonitoring.value()) {
        <app-card-section
          icon="bi-robot"
          class="d-block mt-4"
          [heading]="'aiMonitoring' | i18next"
        >
          <div class="card-body">
            <div class="form-check form-switch mb-4">
              <input
                formControlName="enableAiMonitoring"
                class="form-check-input"
                type="checkbox"
                id="enableAI"
              />
              <label
                class="form-check-label fw-bold"
                for="enableAI"
                >{{ 'enableAiMonitoring' | i18next }}</label
              >
            </div>

            <div class="row g-4">
              <div class="col-md-6">
                <label class="form-label small fw-bold">{{ 'aiMonitoringFrameCaptureRate' | i18next }}</label>
                <input
                  type="number"
                  class="form-control border-secondary"
                  formControlName="aiMonitoringFrameCaptureRate"
                />
                <div class="form-text text-muted">{{ 'aiMonitoringFrameCaptureRateHelp' | i18next }}</div>
              </div>
              <div class="col-md-6">
                <label class="form-label small fw-bold">{{ 'aiMonitoringFailureAction' | i18next }}</label>
                <select
                  class="form-select border-secondary"
                  formControlName="aiMonitoringFailureAction"
                >
                  <option value="AlertOnly">{{ 'aiMonitoringFailureActionAlertOnly' | i18next }}</option>
                  <option value="PauseJob">{{ 'aiMonitoringFailureActionPauseJob' | i18next }}</option>
                  <option value="CancelJob">{{ 'aiMonitoringFailureActionCancelJob' | i18next }}</option>
                </select>
              </div>
            </div>
          </div>
        </app-card-section>
      }
    </div>
  </form>
}
